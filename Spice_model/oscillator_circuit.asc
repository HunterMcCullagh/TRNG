Version 4
SHEET 1 932 920
WIRE -16 -784 -1792 -784
WIRE -1792 -592 -1792 -784
WIRE -1904 -528 -2416 -528
WIRE -1904 -512 -1904 -528
WIRE -1840 -512 -1904 -512
WIRE -1568 -464 -1568 -544
WIRE -944 -464 -944 -544
WIRE -336 -464 -336 -544
WIRE -2416 -448 -2416 -528
WIRE -1616 -384 -1712 -384
WIRE -992 -384 -1088 -384
WIRE -384 -384 -480 -384
WIRE -16 -384 -16 -784
WIRE -1792 -288 -1792 -496
WIRE -1712 -288 -1712 -384
WIRE -1712 -288 -1792 -288
WIRE -1568 -288 -1568 -368
WIRE -1392 -288 -1568 -288
WIRE -1248 -288 -1312 -288
WIRE -1136 -288 -1248 -288
WIRE -1088 -288 -1088 -384
WIRE -1088 -288 -1136 -288
WIRE -944 -288 -944 -368
WIRE -768 -288 -944 -288
WIRE -624 -288 -688 -288
WIRE -480 -288 -480 -384
WIRE -480 -288 -624 -288
WIRE -336 -288 -336 -368
WIRE -160 -288 -336 -288
WIRE -16 -288 -16 -384
WIRE -16 -288 -80 -288
WIRE -2416 -256 -2416 -368
WIRE -1568 -240 -1568 -288
WIRE -944 -240 -944 -288
WIRE -336 -240 -336 -288
WIRE -1248 -224 -1248 -288
WIRE -624 -224 -624 -288
WIRE -16 -224 -16 -288
WIRE -1712 -160 -1712 -288
WIRE -1616 -160 -1712 -160
WIRE -1088 -160 -1088 -288
WIRE -992 -160 -1088 -160
WIRE -480 -160 -480 -288
WIRE -384 -160 -480 -160
WIRE -1568 -112 -1568 -144
WIRE -1248 -112 -1248 -160
WIRE -944 -112 -944 -144
WIRE -624 -112 -624 -160
WIRE -336 -112 -336 -144
WIRE -16 -112 -16 -160
WIRE -2368 80 -2496 80
WIRE -1376 80 -2288 80
WIRE -1136 80 -1136 -288
WIRE -1136 80 -1376 80
WIRE -768 80 -944 80
WIRE -656 80 -768 80
WIRE -2352 128 -2368 128
WIRE -2208 128 -2304 128
WIRE -2496 160 -2496 80
WIRE -416 160 -416 96
WIRE -2368 192 -2368 128
WIRE -2208 192 -2208 128
WIRE -944 192 -944 80
WIRE -416 304 -416 240
WIRE -2496 336 -2496 240
WIRE -944 352 -944 272
FLAG -1248 -112 0
FLAG -1568 -112 0
FLAG -1568 -544 vdd
FLAG -624 -112 0
FLAG -944 -112 0
FLAG -944 -544 vdd
FLAG -16 -112 0
FLAG -336 -112 0
FLAG -336 -544 vdd
FLAG -16 -384 output
FLAG -416 304 0
FLAG -416 96 vdd
FLAG -2416 -256 0
FLAG -2496 336 0
FLAG -944 352 0
FLAG -768 80 initial_pulse
FLAG -2368 192 0
FLAG -2208 192 initial_pulse
FLAG -1376 80 input
SYMBOL res -1296 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {osc_res}
SYMBOL cap -1264 -224 R0
SYMATTR InstName C1
SYMATTR Value {osc_cap}
SYMBOL res -672 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {osc_res}
SYMBOL cap -640 -224 R0
SYMATTR InstName C2
SYMATTR Value {osc_cap}
SYMBOL res -64 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {osc_res}
SYMBOL cap -32 -224 R0
SYMATTR InstName C3
SYMATTR Value {osc_cap}
SYMBOL voltage -416 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {supply_voltage}
SYMBOL pmos -992 -464 R0
SYMATTR InstName M5
SYMATTR Value AO6407
SYMBOL nmos -1616 -240 R0
SYMATTR InstName M1
SYMATTR Value AO6408
SYMBOL nmos -992 -240 R0
SYMATTR InstName M2
SYMATTR Value AO6408
SYMBOL nmos -384 -240 R0
SYMATTR InstName M3
SYMATTR Value AO6408
SYMBOL pmos -1616 -464 R0
SYMATTR InstName M6
SYMATTR Value AO6407
SYMBOL pmos -384 -464 R0
SYMATTR InstName M4
SYMATTR Value AO6407
SYMBOL voltage -2416 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {vbias}
SYMBOL nmos -1840 -592 R0
SYMATTR InstName M7
SYMATTR Value AO6408
SYMBOL sw -2384 80 R270
WINDOW 3 24 -12 Left 2
SYMATTR Value Sample
SYMATTR InstName S1
SYMBOL voltage -2496 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 4
SYMBOL voltage -944 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 1 0 10f 10f 100n 10 1)
TEXT 280 -304 Left 2 ;Hunter McCullagh
TEXT 280 -248 Left 2 !.param osc_cap=1u
TEXT 280 -224 Left 2 !.param osc_res=5k
TEXT 280 -200 Left 2 !.param supply_voltage=5
TEXT 280 -384 Left 2 ;AO3400 = NMOS\nAO3401A = PMOS
TEXT 280 -56 Left 2 ;.ic v(output)=3
TEXT -2280 -560 Left 2 ;GPIO control over feedback loop
TEXT 272 8 Left 2 !.model Sample SW(Ron = 1 Roff = 100e9 Vt=0.5 Vh = 0)
TEXT -1880 56 Left 2 ;GPIO Pulse to start oscillator
TEXT -2360 -408 Left 2 ;This impacts wave shape a lot
TEXT 264 88 Left 2 !.param vbias=3.1\n.tran 10
TEXT 264 152 Left 2 !.step param vbias 2.7 4.5 0.1
